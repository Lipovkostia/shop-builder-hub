
# Улучшение системы разделов в настройках категорий

## Проблемы сейчас

1. **Новый раздел добавляется в конец списка** -- нужно в начало
2. **Нет удобного способа поместить категорию в раздел** -- drag & drop работает, но неочевидно. Нужна явная кнопка/действие
3. **Разделы визуально не отличаются от обычных категорий** -- нужно более заметное оформление

## Что будет сделано

### 1. Новый раздел появляется сверху списка
При создании раздела он будет вставляться в начало массива `items`, а не в конец.

### 2. Визуальное выделение разделов
Разделы получат более заметное оформление:
- Фон с акцентным цветом, более крупный текст
- Иконка папки
- Подпись "раздел" для ясности

### 3. Кнопка "Переместить в раздел" на каждой категории
К каждой обычной категории (не разделу) добавится кнопка со стрелкой вправо. При нажатии -- выпадающий список доступных разделов. Выбор раздела перемещает категорию внутрь него.

### 4. Кнопка "Убрать из раздела" для подкатегорий
У категорий, которые уже в разделе, будет кнопка для извлечения на верхний уровень.

## Техническая часть

| Файл | Что меняется |
|------|-------------|
| `src/components/admin/CategorySettingsSection.tsx` | Все изменения ниже |

### Изменения в `handleAddSection` (строка 535-555)
Вставка в начало массива вместо конца:
```typescript
setItems((prev) => [
  {
    id: created.id,
    name: created.name,
    customName: null,
    parentCategoryId: null,
    sortOrder: 0,
    isSection: true,
  },
  ...prev,
]);
```

### Изменения в `SortableCategoryItem`
- Добавить prop `sections` (список разделов) и `onMoveToSection(itemId, sectionId)`
- Добавить prop `onRemoveFromParent(itemId)` для подкатегорий
- Для обычных категорий (не разделов, не подкатегорий): кнопка с `Popover` содержащим список разделов
- Для подкатегорий: кнопка "Убрать из раздела" (иконка ArrowUpFromLine)
- Разделы: более яркий фон (`bg-primary/10 border-primary/40`), крупнее текст

### Новый обработчик `handleMoveToSection`
```typescript
const handleMoveToSection = (itemId: string, sectionId: string) => {
  setItems(prev => prev.map(i =>
    i.id === itemId ? { ...i, parentCategoryId: sectionId } : i
  ));
  setHasChanges(true);
};
```
