

# –ü–ª–∞–Ω: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞

## –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–°–µ–π—á–∞—Å –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –≥–ª–∞–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`InlinePrimaryCategoryCell`) –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç–æ–º –ø–ª–æ—Å–∫–æ–º —Å–ø–∏—Å–∫–µ –±–µ–∑ –∏–µ—Ä–∞—Ä—Ö–∏–∏. –≠—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Ö `sort_order`
2. –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ, —á—Ç–æ –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. –ù–µ –≤–∏–¥–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã "—Ä–æ–¥–∏—Ç–µ–ª—å ‚Üí —Ä–µ–±—ë–Ω–æ–∫"

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Ç–∞–∫, —á—Ç–æ–±—ã:
1. **–°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ `sort_order`)
2. **–ü–æ–¥ –∫–∞–∂–¥–æ–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π** —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ—Ç—Å—Ç—É–ø–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –µ—ë –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –≤—ã–¥–µ–ª–µ–Ω—ã **–∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º**
4. –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã —Å **–æ—Ç—Å—Ç—É–ø–æ–º —Å–ª–µ–≤–∞** (~16px) –∏ –æ–±—ã—á–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º

### –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:
```text
‚Äî –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
üìÅ –ú—è–≥–∫–∏–π —Å—ã—Ä (–∂–∏—Ä–Ω—ã–π)
    ‚îî –ü–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π –º—è–≥–∫–∏–π
    ‚îî –ë—É—Ä–∞—Ç—Ç–∞
üìÅ –°—ã—Ä–Ω—ã–µ –∑–∞–∫—É—Å–∫–∏ (–∂–∏—Ä–Ω—ã–π)
    ‚îî –ü–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π
üìÅ –û–ª–∏–≤–∫–∏ (–∂–∏—Ä–Ω—ã–π)
üìÅ –°–æ—É—Å (–∂–∏—Ä–Ω—ã–π)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: `src/components/admin/InlinePrimaryCategoryCell.tsx`

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É `buildCategoryTree`** –∏–∑ `@/lib/categoryUtils` –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞:**
   - –ò—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –¥–µ—Ä–µ–≤—É, –∞ –Ω–µ –ø–æ –ø–ª–æ—Å–∫–æ–º—É —Å–ø–∏—Å–∫—É
   - –î–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –µ—ë —Å –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
   - –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–µ—ë —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –æ—Ç—Å—Ç—É–ø–æ–º

3. **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:**
   - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: `font-bold`, –æ–±—ã—á–Ω—ã–π padding
   - –î–æ—á–µ—Ä–Ω—è—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: `font-normal`, `pl-6` (–æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞)
   - –¢–æ–Ω–∫–∞—è –ª–∏–Ω–∏—è-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –õ–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–µ—Ä–µ–≤–∞:

```typescript
import { buildCategoryTree, CategoryTree } from "@/lib/categoryUtils";

const categoryTree = useMemo(() => {
  return buildCategoryTree(options.map(o => ({
    id: o.value,
    name: o.label,
    slug: '',
    image_url: null,
    parent_id: o.parent_id || null,
    product_count: 1, // –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
  })));
}, [options]);
```

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–µ—Ä–µ–≤–∞:

```typescript
const renderCategoryItem = (cat: CategoryTree, depth: number = 0) => {
  const isParent = depth === 0;
  const isSelected = localValue === cat.id;
  
  return (
    <React.Fragment key={cat.id}>
      <div
        onClick={() => handleSelect(cat.id)}
        className={cn(
          "flex items-center gap-2 px-2 py-1.5 rounded hover:bg-muted text-sm cursor-pointer",
          isSelected && "bg-primary/10 text-primary",
          !isParent && "pl-6" // –û—Ç—Å—Ç—É–ø –¥–ª—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π
        )}
      >
        <FolderOpen className="h-3.5 w-3.5 flex-shrink-0" />
        <span className={cn("truncate", isParent && "font-semibold")}>
          {cat.name}
        </span>
        {isSelected && <Check className="h-3 w-3 ml-auto" />}
      </div>
      
      {/* –†–µ–Ω–¥–µ—Ä–∏–º –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–æ–¥–∏—Ç–µ–ª—è */}
      {cat.children
        .sort((a, b) => (a.sort_order ?? 0) - (b.sort_order ?? 0))
        .map(child => renderCategoryItem(child, depth + 1))}
    </React.Fragment>
  );
};
```

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `src/components/admin/InlinePrimaryCategoryCell.tsx` | –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ |

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ —Å–æ–≥–ª–∞—Å–Ω–æ `sort_order`
- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å –æ—Ç—Å—Ç—É–ø–æ–º –ø–æ–¥ —Å–≤–æ–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ `primary_category_id`

