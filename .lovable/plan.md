

# План: Автоматическая фиксация цены при импорте через AI-ассистента

## Проблема
При импорте прайса через умного помощника цена устанавливается в столбик "Цена", но в каталоге всё равно используется расчёт на основе себестоимости. Это происходит потому, что при импорте не устанавливается флаг `is_fixed_price: true`.

## Решение
При импорте цены из Excel автоматически включать флаг `is_fixed_price`, чтобы импортированная цена использовалась напрямую в каталоге.

## Изменения

### 1. priceListImport.ts — установка is_fixed_price при импорте цены

Добавить `is_fixed_price: true` когда импортируется поле "Цена":

**Строки 633-635** — при обновлении существующего товара:
```typescript
if (fieldsToUpdate.includes('price') && excelProduct.price !== undefined) {
  updateData.price = excelProduct.price;
  updateData.is_fixed_price = true;  // Фиксируем цену при импорте
}
```

**При создании нового товара** (около строки 693):
```typescript
is_fixed_price: excelProduct.price !== undefined,  // Если указана цена, фиксируем
```

## Логика
- Если при импорте указана колонка "Цена" (`price`) — автоматически ставим `is_fixed_price: true`
- Это заставит каталог использовать именно эту цену, а не расчёт по себестоимости
- Если в будущем пользователь захочет вернуться к расчёту по наценке — он может нажать на иконку замка

## Файлы для изменения
- `src/lib/priceListImport.ts`

