

# Биржа заявок -- редизайн в стиле торговой платформы

## Концепция

Полностью переработать интерфейс раздела "Биржа" в панели продавца, взяв за основу компоновку криптобиржи (как на скриншоте StormGain). Вместо простого списка заявок -- многопанельный дашборд с графиком цен, списком товаров, книгой заявок и историей.

## Макет (раскладка блоков)

```text
+---------------------+----------------------------------+-------------------+
|  1. ТОВАРЫ          |  3. ГРАФИК ЦЕН                   |  4. МОИ ЗАЯВКИ    |
|  (левая колонка)    |  (центр, основной блок)           |  (правая колонка) |
|                     |                                    |                   |
|  Пармезан   2890₽   |  Розничная ▬▬  Оптовая ▬▬         |  Активных: 3      |
|  Грана П.   1890₽   |  [линейный график recharts]       |  Откликов: 5      |
|  Хамон      3490₽   |                                    |  [+ Новая заявка] |
|  Моцарелла   390₽   |                                    |                   |
|  ...                |                                    |  Баланс позиций:  |
|                     |                                    |  Сыры: 12         |
+---------------------+----------------------------------+  Мясо: 4          |
|  5. ЗАЯВКИ НА ПОКУПКУ (книга заявок)                    |  ...              |
|  Позиция  | Кол-во предл. | Мин. цена | Макс. | [Мое]  |                   |
|  Пармезан  |  3            | 2100₽     | 2500₽ | [___]  +-------------------+
|  Грана П.  |  1            | 1600₽     | 1600₽ | [___]  |  6. ИСТОРИЯ       |
|  Хамон     |  5            | 2900₽     | 3200₽ | [___]  |  Мои отклики      |
|  [Отправить предложение]                                 |  и закрытые       |
+---------------------+----------------------------------+-------------------+
```

## Описание блоков

### Блок 1 -- Список товаров (левая панель)
- Вертикальный список популярных товаров платформы (тестовые данные)
- Каждая строка: название, текущая оптовая цена, изменение в %
- Клик по товару -- обновляет график в центре
- Подсветка выбранного товара (как в крипто-терминале)

### Блок 2 -- Верхняя панель с выбранным товаром
- Название выбранного товара крупно
- Кнопка "Создать заявку" (аналог "Открыть сделку")
- Розничная / оптовая цена рядом

### Блок 3 -- График цен (центральная область)
- Recharts `AreaChart` или `LineChart`
- Две линии: розничная (зеленая) и оптовая (синяя) цена
- Тестовые данные за 30 дней (сгенерированные с небольшим разбросом)
- Переключатели периода: 1Н, 1Д, 1М, 3М
- Легенда: "Розница" / "Опт"

### Блок 4 -- Мои заявки / сводка (правая панель)
- Количество активных заявок
- Количество полученных откликов
- Кнопка "+ Новая заявка" (открывает существующий ExchangeCreateDialog)
- Список категорий с количеством позиций
- Компактный вид, как "Мои кошельки" на крипто-бирже

### Блок 5 -- Книга заявок (нижняя центральная область)
- Табличный вид всех активных заявок на платформе
- Столбцы: Товар, Кол-во предложений, Мин. цена, Макс. цена, Моё предложение (поле ввода)
- Кнопка "Отправить предложение" внизу
- Пустое состояние: "Нет активных заявок на бирже"

### Блок 6 -- История / отчеты (правая нижняя)
- Список закрытых заявок и отправленных откликов
- Компактные строки с датой и статусом
- Пустое состояние: "История пуста"

## Цветовая схема

- Темная тема блоков: `bg-slate-900` с `text-white` (как на крипто-бирже)
- Зеленый акцент для роста / розничной цены
- Синий для оптовой цены
- Границы блоков: `border-slate-700`
- Кнопка "Создать заявку": зеленая (`bg-emerald-500`)

## Тестовые данные

Встроенные массивы (не из БД) для демо:
- 10 продуктов (сыры, хамон, мясо) с розничной и оптовой ценой
- 30-дневная история цен (генерируется программно с Math.random)
- 5-7 тестовых заявок в книге заявок

## Технические детали

### Файлы для изменения

1. **`src/components/admin/ExchangeSection.tsx`** -- полная переработка в многопанельный дашборд с CSS Grid раскладкой
2. Новые вспомогательные компоненты внутри ExchangeSection (без отдельных файлов для простоты):
   - Список товаров (левая панель)
   - График цен (recharts)
   - Панель "Мои заявки"
   - Книга заявок (таблица)
   - История

### Зависимости
- `recharts` -- уже установлен, используем `LineChart`, `Line`, `XAxis`, `YAxis`, `Tooltip`, `ResponsiveContainer`
- Никаких новых зависимостей не требуется

### Адаптивность
- На мобильных: блоки складываются в одну колонку вертикально
- На десктопе: CSS Grid `grid-cols-[280px_1fr_260px]` для трехколоночной раскладки

### Интеграция с существующей логикой
- Хук `useExchange` остается без изменений -- используется для реальных заявок
- `ExchangeCreateDialog` остается без изменений -- открывается по кнопке "Создать заявку"
- `ExchangeRequestCard` и `ExchangeResponseForm` больше не используются напрямую в основном виде, но остаются в кодовой базе
- Данные из `useExchange` (myRequests, allRequests) отображаются в соответствующих панелях

